# iOS Assets Coder

ä¸€ä¸ªç”¨äºå°† iOS é¡¹ç›®ä¸­çš„ `Assets.xcassets` èµ„æºè‡ªåŠ¨ç”Ÿæˆ Swift å¸¸é‡ä»£ç çš„å‘½ä»¤è¡Œå·¥å…·ã€‚


## åŠŸèƒ½ç‰¹æ€§

- ğŸ¨ **é¢œè‰²èµ„æºä»£ç ç”Ÿæˆ**ï¼šè‡ªåŠ¨æ‰«ææ‰€æœ‰ `.colorset` ç›®å½•ï¼Œç”Ÿæˆç±»å‹å®‰å…¨çš„ Swift é¢œè‰²å¸¸é‡
- ğŸ–¼ï¸ **å›¾ç‰‡èµ„æºä»£ç ç”Ÿæˆ**ï¼šè‡ªåŠ¨æ‰«ææ‰€æœ‰ `.imageset` ç›®å½•ï¼Œç”Ÿæˆç±»å‹å®‰å…¨çš„ Swift å›¾ç‰‡å¸¸é‡
- ğŸš€ **ç±»å‹å®‰å…¨**ï¼šç”Ÿæˆçš„ä»£ç æä¾›ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥ï¼Œé¿å…ç¡¬ç¼–ç å­—ç¬¦ä¸²
- ğŸ“¦ **ç®€å•æ˜“ç”¨**ï¼šä¸€è¡Œå‘½ä»¤å³å¯ç”Ÿæˆæ‰€æœ‰èµ„æºå¸¸é‡
- ğŸ”„ **è‡ªåŠ¨æ’åº**ï¼šç”Ÿæˆçš„å¸¸é‡æŒ‰å­—æ¯é¡ºåºæ’åºï¼Œä¾¿äºæŸ¥æ‰¾å’Œç®¡ç†

## å®‰è£…

### å‰ç½®è¦æ±‚

- Go 1.16 æˆ–æ›´é«˜ç‰ˆæœ¬
- macOS/iOS å¼€å‘ç¯å¢ƒ

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨å®‰è£…è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/yourusername/ios-assets-coder.git
cd ios-assets-coder

# è¿è¡Œå®‰è£…è„šæœ¬
chmod +x install.sh
./install.sh
```

å®‰è£…è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- ç¼–è¯‘é¡¹ç›®
- å®‰è£…åˆ° Go çš„ bin ç›®å½•
- æ£€æŸ¥ PATH ç¯å¢ƒå˜é‡é…ç½®

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨æ„å»º

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/yourusername/ios-assets-coder.git
cd ios-assets-coder

# ä½¿ç”¨æ„å»ºè„šæœ¬
chmod +x build.sh
./build.sh

# æˆ–è€…ç›´æ¥ä½¿ç”¨ go build
go build -o ios-assets-coder main.go
```

### æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ go install

```bash
go install github.com/yourusername/ios-assets-coder@latest
```

## ä½¿ç”¨æ–¹æ³•

### æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯

```bash
# æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
ios-assets-coder --help
ios-assets-coder -h

# æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
ios-assets-coder --version
ios-assets-coder -v
```

### åŸºæœ¬ç”¨æ³•

```bash
# ä½¿ç”¨é»˜è®¤è·¯å¾„
ios-assets-coder

# è‡ªå®šä¹‰è·¯å¾„
ios-assets-coder --input ./path/to/Assets.xcassets \
                 --color-output ./Generated/R_color.swift \
                 --image-output ./Generated/R_image.swift

# åˆ›å»º R ç»“æ„ä½“æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
ios-assets-coder --input ./path/to/Assets.xcassets \
                 --color-output ./Generated/R_color.swift \
                 --image-output ./Generated/R_image.swift \
                 --create-r ./Generated/R.swift
```

### å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `--input` | `./Assets.xcassets` | Assets.xcassets ç›®å½•è·¯å¾„ |
| `--color-output` | `./R_color.swift` | é¢œè‰²å¸¸é‡è¾“å‡ºæ–‡ä»¶è·¯å¾„ |
| `--image-output` | `./R_image.swift` | å›¾ç‰‡å¸¸é‡è¾“å‡ºæ–‡ä»¶è·¯å¾„ |
| `--create-r` | æ—  | åˆ›å»º R ç»“æ„ä½“æ–‡ä»¶è·¯å¾„ï¼ˆå¯é€‰ï¼‰ |

## ç”Ÿæˆä»£ç ç¤ºä¾‹

### é¢œè‰²å¸¸é‡ (R_color.swift)

æ‰«ææ‰€æœ‰çš„ `*.colorset` ç›®å½•ï¼Œç”Ÿæˆä¸¤ç§ä½¿ç”¨æ–¹å¼çš„å¸¸é‡ï¼š

```swift
// Generated by ios-assets-coder
// DO NOT EDIT THIS FILE MANUALLY

import SwiftUI

// MARK: - Color Extension
extension Color {
    /// color_green_lighten1
    public static var color_green_lighten1: Color {
        Color("color_green_lighten1")
    }
    
    /// color_blue_darken2
    public static var color_blue_darken2: Color {
        Color("color_blue_darken2")
    }
    // ... æ›´å¤šé¢œè‰²
}

// MARK: - R Extension for Color Names
extension R {
    // MARK: - Color Names
    /// color_green_lighten1
    public static var color_green_lighten1: String {
        "color_green_lighten1"
    }
    
    /// color_blue_darken2
    public static var color_blue_darken2: String {
        "color_blue_darken2"
    }
    // ... æ›´å¤šé¢œè‰²åç§°
}
```

### å›¾ç‰‡å¸¸é‡ (R_image.swift)

æ‰«ææ‰€æœ‰çš„ `*.imageset` ç›®å½•ï¼Œç”Ÿæˆä¾¿æ·çš„å›¾ç‰‡è®¿é—®æ–¹å¼ï¼š

```swift
// Generated by ios-assets-coder
// DO NOT EDIT THIS FILE MANUALLY

import SwiftUI

// MARK: - R Extension for Image Names
extension R {
    // MARK: - Image Names
    /// bot_add_icon
    public static var bot_add_icon: String {
        "bot_add_icon"
    }
    
    /// bot_search_icon
    public static var bot_search_icon: String {
        "bot_search_icon"
    }
    // ... æ›´å¤šå›¾ç‰‡åç§°
}

// MARK: - Image Extension
extension Image {
    /// bot_add_icon
    public static var bot_add_icon: Image {
        Image("bot_add_icon")
    }
    
    /// bot_search_icon
    public static var bot_search_icon: Image {
        Image("bot_search_icon")
    }
    // ... æ›´å¤šå›¾ç‰‡
}
```

## åœ¨ Swift é¡¹ç›®ä¸­ä½¿ç”¨

ç”Ÿæˆä»£ç åï¼Œåœ¨ä½ çš„ Swift é¡¹ç›®ä¸­å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š

```swift
// ä½¿ç”¨é¢œè‰²
let backgroundColor = Color.color_green_lighten1
let colorName = R.color_green_lighten1  // è·å–é¢œè‰²åç§°å­—ç¬¦ä¸²

// ä½¿ç”¨å›¾ç‰‡
let iconImage = Image.bot_add_icon
let imageName = R.bot_add_icon  // è·å–å›¾ç‰‡åç§°å­—ç¬¦ä¸²

// åœ¨ SwiftUI ä¸­ä½¿ç”¨
struct ContentView: View {
    var body: some View {
        VStack {
            Image.bot_add_icon
                .foregroundColor(.color_blue_darken2)
            
            Text("Hello")
                .background(Color.color_green_lighten1)
        }
    }
}
```

## é›†æˆåˆ° Xcode æ„å»ºæµç¨‹

ä½ å¯ä»¥å°†æ­¤å·¥å…·é›†æˆåˆ° Xcode çš„æ„å»ºè„šæœ¬ä¸­ï¼Œå®ç°è‡ªåŠ¨æ›´æ–°èµ„æºå¸¸é‡ï¼š

1. åœ¨ Xcode é¡¹ç›®ä¸­ï¼Œé€‰æ‹©ä½ çš„ Target
2. è¿›å…¥ "Build Phases" æ ‡ç­¾
3. ç‚¹å‡» "+" æŒ‰é’®ï¼Œé€‰æ‹© "New Run Script Phase"
4. æ·»åŠ ä»¥ä¸‹è„šæœ¬ï¼š

```bash
# ç¡®ä¿ Go ç¯å¢ƒå¯ç”¨
export PATH=$PATH:/usr/local/go/bin

# è¿›å…¥é¡¹ç›®ç›®å½•
cd "$SRCROOT"

# è¿è¡Œèµ„æºä»£ç ç”Ÿæˆå™¨
if [ -f "./ios-assets-coder" ]; then
    ./ios-assets-coder --input ./YourApp/Assets.xcassets \
                       --color-output ./YourApp/Generated/R_color.swift \
                       --image-output ./YourApp/Generated/R_image.swift
else
    echo "Warning: ios-assets-coder not found"
fi
```

## ç‰¹æ€§è¯´æ˜

### å‘½åè§„åˆ™è½¬æ¢

å·¥å…·ä¼šè‡ªåŠ¨å¤„ç†ç‰¹æ®Šå­—ç¬¦ï¼Œç¡®ä¿ç”Ÿæˆçš„ Swift æ ‡è¯†ç¬¦åˆæ³•ï¼š
- è¿å­—ç¬¦ `-` è½¬æ¢ä¸ºä¸‹åˆ’çº¿ `_`
- ç©ºæ ¼è½¬æ¢ä¸ºä¸‹åˆ’çº¿ `_`
- å•å¼•å· `'` è¢«ç§»é™¤
- ç‚¹å· `.` è½¬æ¢ä¸ºä¸‹åˆ’çº¿ `_`
- ä»¥æ•°å­—å¼€å¤´çš„åç§°ä¼šæ·»åŠ ä¸‹åˆ’çº¿å‰ç¼€

### æ”¯æŒçš„èµ„æºç±»å‹

- âœ… Color Set (`.colorset`)
- âœ… Image Set (`.imageset`)
- âœ… æ”¯æŒæ·±è‰²æ¨¡å¼çš„é¢œè‰²å®šä¹‰
- âœ… æ”¯æŒ @1x, @2x, @3x å›¾ç‰‡èµ„æº

## æ„å»ºå’Œå‘å¸ƒ

### æ„å»ºå¤šå¹³å°ç‰ˆæœ¬

ä½¿ç”¨æä¾›çš„æ„å»ºè„šæœ¬å¯ä»¥ç”Ÿæˆå¤šä¸ªå¹³å°çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼š

```bash
# æ„å»ºæ‰€æœ‰å¹³å°ç‰ˆæœ¬
./build.sh

# æŒ‡å®šç‰ˆæœ¬å·æ„å»º
./build.sh v1.0.0
```

æ„å»ºè„šæœ¬ä¼šç”Ÿæˆä»¥ä¸‹å¹³å°çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼š
- macOS (Intel å’Œ Apple Silicon)
- Linux (amd64 å’Œ arm64)
- Windows (amd64 å’Œ arm64)

æ‰€æœ‰æ„å»ºäº§ç‰©å°†ä¿å­˜åœ¨ `dist` ç›®å½•ä¸­ã€‚

## æ³¨æ„äº‹é¡¹

1. **ä¸è¦æ‰‹åŠ¨ç¼–è¾‘ç”Ÿæˆçš„æ–‡ä»¶**ï¼šç”Ÿæˆçš„æ–‡ä»¶ä¼šåœ¨æ¯æ¬¡è¿è¡Œæ—¶è¢«è¦†ç›–
2. **ç‰ˆæœ¬æ§åˆ¶**ï¼šå»ºè®®å°†ç”Ÿæˆçš„æ–‡ä»¶åŠ å…¥ç‰ˆæœ¬æ§åˆ¶ï¼Œä»¥ä¾¿å›¢é˜Ÿæˆå‘˜å…±äº«
3. **æ–‡ä»¶æƒé™**ï¼šç¡®ä¿è¾“å‡ºç›®å½•æœ‰å†™å…¥æƒé™
4. **èµ„æºå‘½å**ï¼šå»ºè®®ä½¿ç”¨å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿å‘½åèµ„æºï¼Œä»¥è·å¾—æœ€ä½³çš„ä»£ç ç”Ÿæˆæ•ˆæœ
5. **R ç»“æ„ä½“**ï¼šå¦‚æœä½¿ç”¨ `extension R`ï¼Œéœ€è¦å…ˆä½¿ç”¨ `--create-r` å‚æ•°åˆ›å»º R ç»“æ„ä½“æ–‡ä»¶ï¼Œæˆ–åœ¨é¡¹ç›®ä¸­æ‰‹åŠ¨å®šä¹‰ `public struct R {}`

## å‘½ä»¤è¡Œå‚æ•°

```
ios-assets-coder [OPTIONS]

OPTIONS:
  --input <è·¯å¾„>          Assets.xcassets ç›®å½•è·¯å¾„ (é»˜è®¤: ./Assets.xcassets)
  --color-output <è·¯å¾„>   é¢œè‰²å¸¸é‡è¾“å‡ºæ–‡ä»¶è·¯å¾„ (é»˜è®¤: ./R_color.swift)
  --image-output <è·¯å¾„>   å›¾ç‰‡å¸¸é‡è¾“å‡ºæ–‡ä»¶è·¯å¾„ (é»˜è®¤: ./R_image.swift)
  --create-r <è·¯å¾„>       åˆ›å»º R ç»“æ„ä½“æ–‡ä»¶è·¯å¾„ (å¯é€‰ï¼Œä¸ä¼ åˆ™ä¸åˆ›å»º)
  
  -h, --help             æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
  -v, --version          æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
```

## License

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ä½œè€…

Your Name