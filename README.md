# iOS Assets Coder

一个用于将 iOS 项目中的 `Assets.xcassets` 资源自动生成 Swift 常量代码的命令行工具。

## 功能特性

- 🎨 **颜色资源代码生成**：自动扫描所有 `.colorset` 目录，生成类型安全的 Swift 颜色常量
- 🖼️ **图片资源代码生成**：自动扫描所有 `.imageset` 目录，生成类型安全的 Swift 图片常量
- 🚀 **类型安全**：生成的代码提供编译时类型检查，避免硬编码字符串
- 📦 **简单易用**：一行命令即可生成所有资源常量
- 🔄 **自动排序**：生成的常量按字母顺序排序，便于查找和管理

## 安装

### 前置要求

- Go 1.16 或更高版本
- macOS/iOS 开发环境

### 构建

```bash
# 克隆项目
git clone https://github.com/yourusername/ios-assets-coder.git
cd ios-assets-coder

# 构建可执行文件
go build -o ios-assets-coder main.go
```

## 使用方法

### 基本用法

```bash
# 使用默认路径
go run main.go

# 或者使用构建后的可执行文件
./ios-assets-coder

# 自定义路径
go run main.go --input ./path/to/Assets.xcassets \
               --color-output ./Generated/R_color.swift \
               --image-output ./Generated/R_image.swift

# 创建 R 结构体文件（可选）
go run main.go --input ./path/to/Assets.xcassets \
               --color-output ./Generated/R_color.swift \
               --image-output ./Generated/R_image.swift \
               --create-r ./Generated/R.swift
```

### 命令行参数

| 参数 | 默认值 | 说明 |
|------|--------|------|
| `--input` | `./Assets.xcassets` | Assets.xcassets 目录路径 |
| `--color-output` | `./R_color.swift` | 颜色常量输出文件路径 |
| `--image-output` | `./R_image.swift` | 图片常量输出文件路径 |
| `--create-r` | 无 | 创建 R 结构体文件路径（可选） |

## 生成代码示例

### 颜色常量 (R_color.swift)

扫描所有的 `*.colorset` 目录，生成两种使用方式的常量：

```swift
// Generated by ios-assets-coder
// DO NOT EDIT THIS FILE MANUALLY

import SwiftUI

// MARK: - Color Extension
extension Color {
    /// color_green_lighten1
    public static var color_green_lighten1: Color {
        Color("color_green_lighten1")
    }
    
    /// color_blue_darken2
    public static var color_blue_darken2: Color {
        Color("color_blue_darken2")
    }
    // ... 更多颜色
}

// MARK: - R Extension for Color Names
extension R {
    // MARK: - Color Names
    /// color_green_lighten1
    public static var color_green_lighten1: String {
        "color_green_lighten1"
    }
    
    /// color_blue_darken2
    public static var color_blue_darken2: String {
        "color_blue_darken2"
    }
    // ... 更多颜色名称
}
```

### 图片常量 (R_image.swift)

扫描所有的 `*.imageset` 目录，生成便捷的图片访问方式：

```swift
// Generated by ios-assets-coder
// DO NOT EDIT THIS FILE MANUALLY

import SwiftUI

// MARK: - R Extension for Image Names
extension R {
    // MARK: - Image Names
    /// bot_add_icon
    public static var bot_add_icon: String {
        "bot_add_icon"
    }
    
    /// bot_search_icon
    public static var bot_search_icon: String {
        "bot_search_icon"
    }
    // ... 更多图片名称
}

// MARK: - Image Extension
extension Image {
    /// bot_add_icon
    public static var bot_add_icon: Image {
        Image("bot_add_icon")
    }
    
    /// bot_search_icon
    public static var bot_search_icon: Image {
        Image("bot_search_icon")
    }
    // ... 更多图片
}
```

## 在 Swift 项目中使用

生成代码后，在你的 Swift 项目中可以这样使用：

```swift
// 使用颜色
let backgroundColor = Color.color_green_lighten1
let colorName = R.color_green_lighten1  // 获取颜色名称字符串

// 使用图片
let iconImage = Image.bot_add_icon
let imageName = R.bot_add_icon  // 获取图片名称字符串

// 在 SwiftUI 中使用
struct ContentView: View {
    var body: some View {
        VStack {
            Image.bot_add_icon
                .foregroundColor(.color_blue_darken2)
            
            Text("Hello")
                .background(Color.color_green_lighten1)
        }
    }
}
```

## 集成到 Xcode 构建流程

你可以将此工具集成到 Xcode 的构建脚本中，实现自动更新资源常量：

1. 在 Xcode 项目中，选择你的 Target
2. 进入 "Build Phases" 标签
3. 点击 "+" 按钮，选择 "New Run Script Phase"
4. 添加以下脚本：

```bash
# 确保 Go 环境可用
export PATH=$PATH:/usr/local/go/bin

# 进入项目目录
cd "$SRCROOT"

# 运行资源代码生成器
if [ -f "./ios-assets-coder" ]; then
    ./ios-assets-coder --input ./YourApp/Assets.xcassets \
                       --color-output ./YourApp/Generated/R_color.swift \
                       --image-output ./YourApp/Generated/R_image.swift
else
    echo "Warning: ios-assets-coder not found"
fi
```

## 特性说明

### 命名规则转换

工具会自动处理特殊字符，确保生成的 Swift 标识符合法：
- 连字符 `-` 转换为下划线 `_`
- 空格转换为下划线 `_`
- 单引号 `'` 被移除
- 点号 `.` 转换为下划线 `_`
- 以数字开头的名称会添加下划线前缀

### 支持的资源类型

- ✅ Color Set (`.colorset`)
- ✅ Image Set (`.imageset`)
- ✅ 支持深色模式的颜色定义
- ✅ 支持 @1x, @2x, @3x 图片资源

## 注意事项

1. **不要手动编辑生成的文件**：生成的文件会在每次运行时被覆盖
2. **版本控制**：建议将生成的文件加入版本控制，以便团队成员共享
3. **文件权限**：确保输出目录有写入权限
4. **资源命名**：建议使用小写字母和下划线命名资源，以获得最佳的代码生成效果
5. **R 结构体**：如果使用 `extension R`，需要先使用 `--create-r` 参数创建 R 结构体文件，或在项目中手动定义 `public struct R {}`

## License

MIT License

## 贡献

欢迎提交 Issue 和 Pull Request！

## 作者

Your Name